<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PG Theater Call Board</title>
<style>
  body { margin:0; font-family:Arial,sans-serif; background:#0d0d0d; color:#FFD700; }
  .header { display:flex; justify-content:space-between; align-items:center; background:#111; padding:12px 24px; border-bottom:2px solid #FFD700; }
  .header h1 { margin:0; font-size:1.5rem; color:#FFD700; }
  #clock { font-size:1rem; color:#fff; }
  button { padding:6px 12px; margin:2px; border:none; border-radius:4px; cursor:pointer; font-weight:bold; transition:0.2s; }
  button:hover { opacity:0.8; }
  .btn-ghost { background:none; color:#FFD700; border:1px solid #FFD700; }
  .container { padding:24px; max-width:1200px; margin:auto; }
  table { width:100%; border-collapse: collapse; margin-top:12px; }
  th, td { border:1px solid #FFD700; padding:8px; text-align:center; font-size:0.9rem; }
  th { background:#222; }
  td { background:#111; }
  input, select, textarea { padding:6px; margin:2px; border-radius:4px; border:1px solid #FFD700; background:#0d0d0d; color:#FFD700; }
  textarea { resize:none; }
  #loginScreen { display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; }
  #loginScreen input { margin:6px; width:200px; }
  #mainBoard { display:none; }
  .attendance-button { margin:2px; padding:4px 8px; border:none; border-radius:4px; cursor:pointer; font-size:0.8rem; }
  .present { background:#00FF00; color:#000; }
  .absent { background:#FF0000; color:#fff; }
  .tardy { background:#FFD700; color:#000; }
  .left { background:#555; color:#fff; }
  .announcement { border:1px solid #FFD700; padding:8px; margin-bottom:6px; background:#111; }
  .hover-highlight:hover { background:#333; }
  .section-title { font-size:1.2rem; margin-top:24px; margin-bottom:12px; border-bottom:1px solid #FFD700; padding-bottom:4px; }
  .form-inline { display:flex; flex-wrap:wrap; align-items:center; margin-bottom:12px; }
  .form-inline input, .form-inline button { margin-right:6px; }
  #attendanceWrapper { max-height:300px; overflow-y:auto; margin-bottom:12px; border:1px solid #FFD700; }
  #cuesTable th, #cuesTable td { font-size:0.85rem; }
  #showModeBtnMain { display:none; padding:8px 16px; font-size:1rem; margin-bottom:12px; background:#FFD700; color:#0d0d0d; font-weight:bold; border-radius:6px; cursor:pointer; border:none; }
  #showModeBtnMain:hover { background:#fff; color:#FFD700; }
</style>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
import { getDatabase, ref, push, set, onValue, update } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-database.js";

// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyAACv92bzY5cECbECBtsw6oyxrUnEBaJMY",
  authDomain: "pg-theater-call-board.firebaseapp.com",
  databaseURL: "https://pg-theater-call-board-default-rtdb.firebaseio.com",
  projectId: "pg-theater-call-board",
  storageBucket: "pg-theater-call-board.firebasestorage.app",
  messagingSenderId: "850857757575",
  appId: "1:850857757575:web:8b2f93e76b2cf008aea122",
  measurementId: "G-ELWLH31ZCJ"
};
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// User Accounts
const accounts = {
  lnewton:{password:"?2@2yzz~PVJf", role:"Director"},
  tbeck:{password:"pHR68Db.Pw.#", role:"AD/Coreography"},
  gloshe:{password:"iT=hy!7G9NTf", role:"Tech Director"},
  bflieder:{password:"-W9m=>D_AUzF", role:"ATD/Hair Guru"},
  cclark:{password:"iJ+va7>Df}#@", role:"SATD"},
  ljulien:{password:";3y2Paz9£9?m", role:"Stage Manager"},
  hflowers:{password:"i£08um?B51.x", role:"Stage Manager"},
  nwalker:{password:"9^1~R7C*QVdV", role:"Stage Manager"},
  apate:{password:"y~D+V3R-37Wt", role:"Actor"},
  cbeck:{password:"G?5sLRCkZYCg", role:"Actor"},
  sjulien:{password:"#0Y57gk*b?Jq", role:"Actor"},
  agipson:{password:"c!?xGW2JvB:2", role:"Actor"},
  owyatt:{password:"9vq-B#4q]}>.", role:"Actor"},
  swyatt:{password:"B?2jjtvNqtq_", role:"Actor"},
  afry:{password:"5Mxc,kQpd,!T", role:"Actor"},
  rromero:{password:"=4A*pq+xQq:!", role:"Actor"},
  gromero:{password:"j.dab8,6X_m2", role:"Actor"}
};

let currentUser = null;

// DOM Elements
const loginScreen = document.getElementById("loginScreen");
const mainBoard = document.getElementById("mainBoard");
const loginForm = document.getElementById("loginForm");
const usernameInput = document.getElementById("username");
const passwordInput = document.getElementById("password");
const signedInAs = document.getElementById("signedInAs");
const showModeBtnMain = document.getElementById("showModeBtnMain");
const attendanceTable = document.getElementById("attendanceTable").getElementsByTagName('tbody')[0];
const announcementsDiv = document.getElementById("announcements");
const cuesTable = document.getElementById("cuesTable").getElementsByTagName('tbody')[0];

// Clock
function updateCSTClock(){
  const now = new Date();
  const utc = now.getTime() + (now.getTimezoneOffset()*60000);
  const offset = -6; // CST
  const cst = new Date(utc + (3600000*offset));
  let hours = cst.getHours();
  const minutes = cst.getMinutes();
  const ampm = hours>=12?"PM":"AM";
  hours = hours%12; if(hours===0) hours=12;
  const minStr = minutes<10?'0'+minutes:minutes;
  document.getElementById("clock").textContent = `CST ${hours}:${minStr} ${ampm}`;
}
setInterval(updateCSTClock,1000);
updateCSTClock();

// Login
loginForm.addEventListener("submit", e=>{
  e.preventDefault();
  const user=usernameInput.value;
  const pass=passwordInput.value;
  if(accounts[user] && accounts[user].password===pass){
    currentUser = {name:user, role:accounts[user].role};
    loginScreen.style.display="none";
    mainBoard.style.display="block";
    signedInAs.textContent = `Signed in as: ${currentUser.name} (${currentUser.role})`;
    
    // Show the Show Mode button if role is Stage Manager or Director
    if(currentUser.role==="Stage Manager" || currentUser.role==="Director"){
      showModeBtnMain.style.display="inline-block";
    }
    
    renderAttendance();
    renderAnnouncements();
    renderCues();
  }else{ alert("Invalid username or password"); }
});

// ================= Rest of functions (attendance, announcements, cues) =================
// Same as previous full code with Firebase integration
</script>
</head>
<body>
<div class="header">
  <h1>PG Theater Call Board</h1>
  <div id="clock"></div>
  <div id="signedInAs"></div>
</div>

<!-- LOGIN SCREEN -->
<div id="loginScreen">
  <h2>Sign In</h2>
  <form id="loginForm">
    <input id="username" placeholder="Username" required>
    <input type="password" id="password" placeholder="Password" required>
    <button type="submit" class="btn">Sign In</button>
  </form>
</div>

<!-- MAIN BOARD -->
<div id="mainBoard">
  <div class="container">
    <!-- SHOW MODE BUTTON -->
    <button id="showModeBtnMain" onclick="window.location.href='showmode.html'">Go to Show Mode</button>
    
    <!-- ATTENDANCE -->
    <div class="section-title">Attendance</div>
    <div id="attendanceWrapper">
      <table id="attendanceTable">
        <thead><tr><th>Name</th><th>Status</th><th>Actions</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
    <form id="addAttendanceForm" class="form-inline">
      <input id="newName" placeholder="Add Person" required>
      <button type="submit" class="btn">Add</button>
    </form>

    <!-- ANNOUNCEMENTS -->
    <div class="section-title">Announcements</div>
    <div id="announcements"></div>
    <form id="addAnnouncementForm" class="form-inline">
      <input id="announcementText" placeholder="New announcement" required style="width:70%;">
      <button type="submit" class="btn">Post</button>
    </form>

    <!-- SHOW MODE (CUES) -->
    <div class="section-title">Show Mode Cues</div>
    <div id="cuesWrapper">
      <table id="cuesTable">
        <thead><tr><th>#</th><th>Dept</th><th>Action</th><th>Status</th><th>Control</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
    <form id="addCueForm" class="form-inline">
      <input id="cueNumber" placeholder="Cue #" required>
      <input id="cueDept" placeholder="Dept (Lights/Sound/Set)" required>
      <input id="cueAction" placeholder="Action" required>
      <button type="submit" class="btn">Add Cue</button>
    </form>
  </div>
</div>
</body>
</html>